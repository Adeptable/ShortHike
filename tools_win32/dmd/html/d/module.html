
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<!--
	Copyright (c) 1999-2006 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->


<!-- Mirrored from www.shorthike.com/trac/browser/trunk/tools_win32/dmd/html/d/module.html?format=raw by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 01 May 2010 04:37:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="keywords" content="D programming language" />
<meta name="description" content="D Programming Language" />
<title>D Programming Language - Modules</title>
<link rel="stylesheet" type="text/css" href="style.html" />
<link rel="shortcut icon" href="favicon.html" />
</head>

<body>
<div id="heading">
	<a href="http://www.digitalmars.com/"><img src="dmlogo.html" width="270" height="53" style="border-style:none" alt="www.digitalmars.com"></a>

	<div id="headingNav">
	<ul>	<li><a href="http://www.prowiki.org/wiki4d/wiki.cgi?DocComments/Module" title="Read/write comments and feedback">Comments</a></li>
	<li><a href="index.html" title="D Programming Language" class="dlink">D</a></li>
	<li><a href="http://www.digitalmars.com/advancedsearch.html" title="Search Digital Mars web site">Search</a></li>
	<li><a href="download.html" title="download D">Downloads</a></li>
	<li><a href="http://www.digitalmars.com/" title="www.digitalmars.com">Home</a></li>
	</ul>
	</div>

	<div id="lastupdate">Last update Tue Jun  6 16:38:19 2006
</div>
</div>

<!-- Generated by Ddoc from module.d -->



<div id="navigation">
  
<div class="navblock">
<form method="get" action="http://www.google.com/search">
<div id="searchbox">
<input id="q" name="q" size="10" value="Search" onFocus='if(this.value == "Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/d">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</div>
</form>
<div id="toctop">
    <ul>	<li><a href="index.html" title="D Programming Language">D ...</a></li>
	<li><a href="lex.html" title="D Language Specification">Language ...</a></li>
	<li><a href="phobos/phobos.html" title="D Runtime Library">Phobos ...</a></li>
	<li><a href="comparison.html" title="Language Comparisons">Comparisons ...</a></li>
    </ul>
</div>
</div>

  
    <div class="navblock">
    <ul>	<li><a href="lex.html">Lexical</a></li>

	<li><a href="module.html">Modules</a></li>

	<li><a href="declaration.html">Declarations</a></li>

	<li><a href="type.html">Types</a></li>

	<li><a href="property.html">Properties</a></li>

	<li><a href="attribute.html">Attributes</a></li>

	<li><a href="pragma.html">Pragmas</a></li>

	<li><a href="expression.html">Expressions</a></li>

	<li><a href="statement.html">Statements</a></li>

	<li><a href="arrays.html">Arrays</a></li>

	<li><a href="struct.html">Structs &amp; Unions</a></li>

	<li><a href="class.html">Classes</a></li>

	<li><a href="interface.html">Interfaces</a></li>

	<li><a href="enum.html">Enums</a></li>

	<li><a href="function.html">Functions</a></li>

	<li><a href="operatoroverloading.html">Operator Overloading</a></li>

	<li><a href="template.html">Templates</a></li>

	<li><a href="mixin.html">Mixins</a></li>

	<li><a href="dbc.html">Contracts</a></li>

	<li><a href="version.html">Conditional Compilation</a></li>

	<li><a href="errors.html">Handling errors</a></li>

	<li><a href="garbage.html">Garbage Collection</a></li>

	<li><a href="float.html">Floating Point</a></li>

	<li><a href="iasm.html">Inline Assembler</a></li>

	<li><a href="ddoc.html">Documentation Comments</a></li>

	<li><a href="interfaceToC.html">Interfacing To C</a></li>

	<li><a href="portability.html">Portability Guide</a></li>

	<li><a href="html.html">Embedding D in HTML</a></li>

	<li><a href="entity.html">Named Character Entities</a></li>

	<li><a href="abi.html">Application Binary Interface</a></li>

    </ul>
    </div>

</div>
<div id="content">
  <h1>     Modules</h1>
  
<pre class="bnf"><i>Module</i>:
	<i>ModuleDeclaration</i> <i>DeclDefs</i>
	<i>DeclDefs</i>

<i>DeclDefs</i>:
	<i>DeclDef</i>
	<i>DeclDef</i> <i>DeclDefs</i>

<i>DeclDef</i>:
	<i>AttributeSpecifier</i>
	<i>ImportDeclaration</i>
	<i>EnumDeclaration</i>
	<i>ClassDeclaration</i>
	<i>InterfaceDeclaration</i>
	<i>AggregateDeclaration</i>
	<i>Declaration</i>
	<i>Constructor</i>
	<i>Destructor</i>
	<i>Invariant</i>
	<i>UnitTest</i>
	<i>StaticConstructor</i>
	<i>StaticDestructor</i>
	<i>DebugSpecification</i>
	<i>VersionSpecification</i>
	<b>;</b>
</pre>


	Modules have a one-to-one correspondence with source files.
	The module name is the file name with the path and extension
	stripped off.
	<p>

	Modules automatically provide a namespace scope for their contents.
	Modules superficially resemble classes, but differ in that:

	<ul>
	<li> There's only one instance of each module, and it is
	statically allocated.

	<li> There is no virtual table.

	<li> Modules do not inherit, they have no super modules, etc.

	<li> Only one module per file.

	<li> Module symbols can be imported.

	<li> Modules are always compiled at global scope, and are unaffected
	by surrounding attributes or other modifiers.
	</ul>

	Modules can be grouped together in hierarchies called <i>packages</i>.

<h3>Module Declaration</h3>

	The <i>ModuleDeclaration</i> sets the name of the module and what
	package it belongs to. If absent, the module name is taken to be the
	same name (stripped of path and extension) of the source file name.

<pre class="bnf"><i>ModuleDeclaration</i>:
	<b>module</b> <i>ModuleName</i> <b>;</b>

<i>ModuleName</i>:
	<i>Identifier</i>
	<i>ModuleName</i> <b>.</b> <i>Identifier</i>
</pre>

	The <i>Identifier</i> preceding the rightmost are the <i>packages</i>
	that the module is in. The packages correspond to directory names in
	the source file path.
	<p>

	If present, the <i>ModuleDeclaration</i> appears syntactically first
	in the source file, and there can be only one per source file.
	<p>

	Example:

<pre class="d_code"><span class="d_keyword">module</span> c.stdio;    <span class="d_comment">// this is module &lt;b&gt;stdio&lt;/b&gt; in the &lt;b&gt;c&lt;/b&gt; package
</span></pre>

	By convention, package and module names are all lower case. This is
	because those names have a one-to-one correspondence with the operating
	system's directory and file names, and many file systems
	are not case sensitive. All lower case package and module names will
	minimize problems moving projects between dissimilar file systems.

<h3>Import Declaration</h3>

	Rather than text include files, D imports symbols symbolically with the
	import declaration:

<pre class="bnf"><i>ImportDeclaration</i>:
	<b>import</b> <i>ModuleNameList</i> <b>;</b>

<i>ModuleNameList</i>:
	<i>ModuleName</i>
	<i>ModuleName</i> <b>,</b> <i>ModuleNameList</i>
</pre>

	The rightmost <i>Identifier</i> becomes the module name.
	The top level scope in the module is merged with the current scope.
	<p>

	Example:

<pre class="d_code"><span class="d_keyword">import</span> std.c.stdio;  <span class="d_comment">// import module &lt;b&gt;stdio&lt;/b&gt; from the &lt;b&gt;c&lt;/b&gt; package
</span><span class="d_keyword">import</span> foo, bar;     <span class="d_comment">// import modules &lt;b&gt;foo&lt;/b&gt; and &lt;b&gt;bar&lt;/b&gt;
</span></pre>

<h3>Scope and Modules</h3>

	Each module forms its own namespace. When a module is imported
	into another module, by default all its top level declarations are
	available without qualification. Ambiguities are illegal, and
	can be resolved by explicitly qualifying the symbol with the
	module name.
	<p>

	For example, assume the following modules:

<pre class="d_code"><span class="d_comment">// <u>Module foo</u>
</span><span class="d_keyword">int</span> x = 1;
<span class="d_keyword">int</span> y = 2;

<span class="d_comment">// <u>Module bar</u>
</span><span class="d_keyword">int</span> y = 3;
<span class="d_keyword">int</span> z = 4;
</pre>

	then:

<pre class="d_code"><span class="d_keyword">import</span> foo;
...
q = y;		<span class="d_comment">// sets q to foo.y
</span></pre>

	and:

<pre class="d_code"><span class="d_keyword">import</span> foo;
<span class="d_keyword">int</span> y = 5;
q = y;		<span class="d_comment">// local y overrides foo.y
</span></pre>

	and:

<pre class="d_code"><span class="d_keyword">import</span> foo;
<span class="d_keyword">import</span> bar;
q = y;		<span class="d_comment">// error: foo.y or bar.y?
</span></pre>

	and:

<pre class="d_code"><span class="d_keyword">import</span> foo;
<span class="d_keyword">import</span> bar;
q = bar.y;	<span class="d_comment">// q set to 3
</span></pre>

	If the import is private, such as:

<pre class="d_code"><span class="d_keyword">module</span> <i>abc</i>;
<span class="d_keyword">private</span> <span class="d_keyword">import</span> <i>def</i>;
</pre>

	then <i>def</i> is not searched when another module imports <i>abc</i>.

<h4>Module Scope Operator</h4>

	Sometimes, it's necessary to override the usual lexical scoping rules
	to access a name hidden by a local name. This is done with the
	global scope operator, which is a leading '.':

<pre class="d_code"><span class="d_keyword">int</span> x;

<span class="d_keyword">int</span> foo(<span class="d_keyword">int</span> x)
{
    <span class="d_keyword">if</span> (y)
	<span class="d_keyword">return</span> x;		<span class="d_comment">// returns foo.x, not global x
</span>    <span class="d_keyword">else</span>
	<span class="d_keyword">return</span> .x;		<span class="d_comment">// returns global x
</span>}
</pre>

	The leading '.' means look up the name at the module scope level.

<a name="staticorder"><h2>Static Construction and Destruction</h2></a>

	Static constructors are code that gets executed to initialize
	a module or a class before the main() function gets called.
	Static destructors are code that gets executed after the main()
	function returns, and are normally used for releasing
	system resources.

<h3>Order of Static Construction</h3>

	The order of static initialization is implicitly determined by
	the <i>import</i> declarations in each module. Each module is
	assumed to depend on any imported modules being statically
	constructed first.
	Other than following that rule, there is no imposed order
	on executing the module static constructors.
	<p>

	Cycles (circular dependencies) in the import declarations are
	allowed as long as not both of the modules contain static constructors
	or static destructors. Violation of this rule will result
	in a runtime exception.

<h3>Order of Static Construction within a Module</h3>

	Within a module, the static construction occurs in the lexical
	order in which they appear.

<h3>Order of Static Destruction</h3>

	It is defined to be exactly the reverse order that static
	construction was performed in. Static destructors for individual
	modules will only be run if the corresponding static constructor
	successfully completed.

<h3>Order of Unit tests</h3>

	Unit tests are run in the lexical order in which they appear
	within a module.


  
<br><br>
<br><br>
<!-- Google ad -->
<script type="text/javascript"><!--
/**/google_ad_client = "pub-5628673096434613";
/**/google_ad_width = 728;
/**/google_ad_height = 90;
/**/google_ad_format = "728x90_as";
/**/google_ad_channel ="3651639259";
/**/google_page_url = document.location;
//--></script>
<script type="text/javascript" src="../../../../../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div>





<div id="copyright">
Copyright &copy; 1999-2006 by Digital Mars, All Rights Reserved |
Page generated by <a href="http://www.digitalmars.com/d/ddoc.html">Ddoc</a>. |
<a href="http://www.prowiki.org/wiki4d/wiki.cgi?DocComments/Module" title="Read/write comments and feedback">Comments</a>
</div>

</body>

<!-- Mirrored from www.shorthike.com/trac/browser/trunk/tools_win32/dmd/html/d/module.html?format=raw by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 01 May 2010 04:37:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>

