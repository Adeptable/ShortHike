




















<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<HTML> 

<!--
	Copyright (c) 1999-2005 by Digital Mars
	All Rights Reserved
	Written by Walter Bright
	www.digitalmars.com
  -->


<!-- Mirrored from www.shorthike.com/trac/browser/trunk/tools_win32/dmd/html/d/phobos/std_recls.html?format=raw by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 01 May 2010 04:40:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
<META http-equiv="content-type" content="text/html; charset=utf-8" >
<title>Digital Mars - The D Programming Language - std.recls</title>
</head>

<body bgcolor="#FFFFFF">
<font face="Arial, Helvetica,sans-serif">
<a href="http://www.digitalmars.com/" target="_top"><IMG SRC="../dmlogo.html" BORDER=0 WIDTH=270 HEIGHT=53 ALT="www.digitalmars.com"></a>

<a href="http://www.digitalmars.com/" title="www.digitalmars.com" target="_top">Home</a>
| <a href="http://www.digitalmars.com/advancedsearch.html" title="Search Digital Mars web site"  target="_top">Search</a>
| <a href="../index.html" title="D Programming Language"  target="_top"><font color="red"><b>D</b></font></a>
| <a href="http://www.prowiki.org/wiki4d/wiki.cgi?DocComments/Phobos/StdRecls"
	target="_top" title="Read / write comments and feedback">Comments</a>

<br>
<small><i>Last update Mon Aug 22 2005</i></small>
<hr>
<table border=1 cellpadding=4 cellspacing=0 frame="void" summary="this table is for layout only">
<tr>
<td valign="top" bgcolor="#eeeeee" nowrap>
<center>
<form method="get" action="http://www.google.com/search">
<input id="q" name="q" size="10" value="RTL Search" onFocus='if(this.value == "RTL Search"){this.value="";}'>
<input type="hidden" id="domains" name="domains" value="www.digitalmars.com">
<input type="hidden" id="sitesearch" name="sitesearch" value="www.digitalmars.com/d/phobos">
<input type="hidden" id="sourceid" name="sourceid" value="google-search">
<input type="submit" id="submit" name="submit" value="Go">
</form>
</center>
<center><a href="../index.html" title="D Programming Language">D</a></center>
<center><a href="../lex.html" title="D Language Specification">Language</a></center>
<center><a href="phobos.html" title="D Runtime Library">Phobos</a></center>
<center><a href="../comparison.html" title="Language Comparisons">Comparisons</a></center><hr><br>

<a href="object.html" title="root of object heirarchy">object</a><br>
<br>
<small>
<a href="phobos.html#std" title="D standard modules">std</a><br>
&nbsp;<a href="std_base64.html" title="Encode/decode base64 format">std.base64</a><br>
&nbsp;<a href="std_boxer.html" title="Box/unbox types">std.boxer</a><br>
&nbsp;<a href="std_compiler.html" title="Information about the D compiler implementation">std.compiler</a><br>
&nbsp;<a href="std_conv.html" title="Conversion of strings to integers">std.conv</a><br>
&nbsp;<a href="std_ctype.html" title="Simple character classification">std.ctype</a><br>
&nbsp;<a href="std_date.html" title="Date and time functions">std.date</a><br>
&nbsp;<a href="std_file.html" title="Basic file operations">std.file</a><br>
&nbsp;<a href="std_format.html" title="Formatted conversions of values to strings">std.format</a><br>
&nbsp;<a href="std_gc.html" title="Control the garbage collector">std.gc</a><br>
&nbsp;<a href="std_intrinsic.html" title="Compiler built in intrinsic functions">std.intrinsic</a><br>
&nbsp;<a href="std_math.html" title="the usual math functions">std.math</a><br>
&nbsp;<a href="std_md5.html" title="Compute MD5 digests">std.md5</a><br>
&nbsp;<a href="std_mmfile.html" title="Memory mapped files">std.mmfile</a><br>
&nbsp;<a href="std_openrj.html" title="Basic database">std.openrj</a><br>
&nbsp;<a href="std_outbuffer.html" title="Assemble data into an array of bytes">std.outbuffer</a><br>
&nbsp;<a href="std_path.html" title="Manipulate file names, path names, etc.">std.path</a><br>
&nbsp;<a href="std_process.html" title="Create/destroy threads">std.process</a><br>
&nbsp;<a href="std_random.html" title="Random number generation">std.random</a><br>
&nbsp;<a href="std_recls.html" title="ecursively search file system and FTP sites">std.recls</a><br>
&nbsp;<a href="std_regexp.html" title="regular expressions">std.regexp</a><br>
&nbsp;<a href="std_socket.html" title="Sockets">std.socket</a><br>
&nbsp;<a href="std_socketstream.html" title="Stream for a blocking, connected Socket">std.socketstream</a><br>
&nbsp;<a href="std_stdint.html" title="Integral types for various purposes">std.stdint</a><br>
&nbsp;<a href="std_stdio.html" title="Standard I/O">std.stdio</a><br>
&nbsp;<a href="std_cstream.html" title="Stream I/O">std.cstream</a><br>
&nbsp;<a href="std_stream.html" title="Stream I/O">std.stream</a><br>
&nbsp;<a href="std_string.html" title="Basic string operations">std.string</a><br>
&nbsp;<a href="std_system.html" title="Inquire about the CPU, operating system">std.system</a><br>
&nbsp;<a href="std_thread.html" title="Thread operations">std.thread</a><br>
&nbsp;<a href="std_uri.html" title="Encode and decode Uniform Resource Identifiers (URIs)">std.uri</a><br>
&nbsp;<a href="std_utf.html" title="Encode and decode utf character encodings">std.utf</a><br>
&nbsp;<a href="std_zip.html" title="Read/write zip archives">std.zip</a><br>
&nbsp;<a href="std_zlib.html" title="Compression / Decompression of data">std.zlib</a><br>
<br>
<a href="phobos.html#std_windows" title="Modules specific to Windows">std.windows</a><br>
<br>
<a href="phobos.html#std_linux" title="Modules specific to Windows">std.linux</a><br>
<br>
<a href="phobos.html#std_c" title="Standard C functions">std.c</a><br>
&nbsp;<a href="#stdio" title="Standard C stdio.h">std.c.stdio</a><br>
<br>
<a href="phobos.html#std_c_windows" title="C Windows API">std.c.windows</a><br>
<br>
<a href="phobos.html#std_c_linux" title="C Linux API">std.c.linux</a><br>
<br>
</small>
</td>
<td valign="top">


<h1 align=center>std.recls</h1>



<p>
<b>recls</b> - standing for <b>rec</b>ursive <b>ls</b> - is a platform-independent
recursive search library, designed and implemented by Matthew Wilson, as the first
exemplar project for his column <b>Positive Integration</b> in 
<a href = "http://www.cuj.com/" target = "_blank">C/C++ Users Journal</a>.
<p>
<b>recls</b> currently supports recursive searching of file systems (UNIX and Windows), and
FTP sites (currently Windows-only). Future enhancements may include recursive-searching of the
Windows registry, source-code control systems, and, of course, FTP-searching for UNIX platforms.
<p>
<b>recls</b> is implemented in C++, using the
<a href = "http://www.stlsoft.org/" target = "_blank">STLSoft</a>
libraries (which are also bundled with Digital Mars; see
<a href = "http://stlsoft.digitalmars.com/" target = "_blank">stlsoft.digitalmars.com</a>),
and presents a C-API. <b>recls</b> is also mapped to a host of other languages and 
technologies, including <b>C++</b>, <b>COM</b>, <b>C#</b>/<b>.NET</b>, <b>Java</b>, <b>Ruby</b>
and <b>STL</b> among an ever-expanding list. Given its non-trivial size, the <b>recls</b> D
mapping is a good place to learn about interfacing C libraries to D.
<p>
The <b>recls</b> homepage is <a href = "http://www.recls.org/" target = "_blank">www.recls.org</a>,
from which updates to the library, and all the other language mappings, may be obtained. Support
for <b>recls</b> has evolved to piggy-back on the
<a href = "news://news.digitalmars.com/c++.stlsoft">STLSoft newsgroup</a>, although 
questions about using <b>recls</b> in D should be directed through the main
<a href = "news://news.digitalmars.com/digitalmars.D">D newsgroup</a>, and bugs in 
<b>recls</b> (in D) should be reported to the
<a href = "news://news.digitalmars.com/digitalmars.D.bugs">D bugs newsgroup</a>.
<p>
The Windows version of the D mapping of <b>recls</b> uses a crude-but-adequate delay-loading
mechanism such that linking to WinInet.lib is not required. This strategy was necessitated by
D's linkage model, and was elected to avoid encumbering executables with something that they
may not use. There is are negative effects if the program explicitly uses WinInet.lib for
other aspects.
<p>
The recls object model is comprised of the following classes:
<ul>
 <li><a href = "#std.recls.Entry">Entry</a></li>
 <li><a href = "#std.recls.FileSearch">FileSearch</a></li>
 <li><a href = "#std.recls.FtpSearch">FtpSearch</a> (currently Windows-only)</li>
 <li><a href = "#std.recls.ReclsException">ReclsException</a></li>
 <li><a href = "#std.recls.Search">Search</a> (base class of 
 <a href = "#std.recls.FileSearch">FileSearch</a> and 
 <a href = "#std.recls.FtpSearch">FtpSearch</a>)</li>
</ul>
the enum <b>RECLS_FLAG</b>:
<ul>
 <li><a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a></li>
</ul>
and the following <a href = "#std.recls functions">functions</a>:
<ul>
 <li><a href = "#std.recls.getRoots">getRoots()</a></li>
 <li><a href = "#std.recls.getPathNameSeparator">getPathNameSeparator()</a></li>
 <li><a href = "#std.recls.getPathSeparator">getPathSeparator()</a></li>
 <li><a href = "#std.recls.wildcardsAll">wildcardsAll()</a></li>
 <li><a href = "#std.recls.isDirectoryEmpty">isDirectoryEmpty()</a></li>
 <li><a href = "#std.recls.calcDirectorySize">calcDirectorySize()</a></li>
</ul>
<p>
The basic usage is as follows:
<ol>
 <li>
  Create a search instance, either <a href = "#std.recls.FileSearch">FileSearch</a> or 
  <a href = "#std.recls.FtpSearch">FtpSearch</a>, e.g.
  <pre>
    // Enumerate all the zip and exe files on the Digital Mars FTP server
    <a href = "#std.recls.Search">Search</a> s = new <a href = "#std.recls.FtpSearch">FtpSearch</a>("ftp.digitalmars.com", "anonymous", "", "/",
	"*.zip;*.exe", <a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a>.RECURSIVE | <a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a>.PASSIVE_FTP);
  </pre>
  or
  <pre>
    // Enumerate all the three-letter first-level sub-directories beginning
    // with <b>s</b> of <b>H:\SynSoft\D\phobos\</b>
    <a href = "#std.recls.Search">FileSearch</a> s = new <a href = "#std.recls.FileSearch">FileSearch</a>("H:\SynSoft\D\phobos\", "s??",
	<a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a>.DIRECTORIES);
  </pre>
 </li>
 <li>
  Enumerate the search instance, using <b>foreach</b>.
  <pre>
    foreach(<a href = "#std.recls.Entry">Entry</a> e; s)
    {
      if(e.size < 2000)
      {
        writef(e.path);       // e.g. "/Digital_Mars_C++/STL"
        writef(e.directory);  // e.g. "/Digital_Mars_C++/STL"
        writef(e.file);       // e.g. "stlport.zip"
        writef(e.fileName);   // e.g. "stlport"
        writef(e.fileExt);    // e.g. "zip"
        ...
      }
    }
  </pre>
  The many properties of the <a href = "#std.recls.Entry">Entry</a> class are used to provide
  access to all attributes of file/directory entries.
 </li>
</ol>
<p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.Entry"><h3>std.recls.Entry</h3></a>
 The <b>Entry</b> class has the following properties:
 <dl>
  <dl>
   <dt>char[] <b>getPath</b>()</dt>
   <dt>char[] <b>path</b>()</dt>
   <dd>The full path of the entry</dd>
   <p>

   <dt>char <b>drive</b>() - (Windows only)</dt>
   <dd>The drive component of the entry's path</dd>
   <p>

   <dt>char[] <b>directory</b>()</dt>
   <dd>The directory component of the entry's path</dd>
   <p>

   <dt>char[] <b>directoryPath</b>()</dt>
   <dd>The full location component of the entry's path.</dd>
   <p>

   <dt>char[][]     <b>directoryParts</b>()</dt>
   <dd>An array of strings representing the parts of the Directory property</dd>
   <p>

   <dt>char[] <b>file</b>()</dt>
   <dd>The file component of the entry's path</dd>
   <p>

   <dt>char[] <b>shortFile</b>()</dt>
   <dd>The short equivalent of the entry's File property</dd>
   <p>

   <dt>char[] <b>fileName</b>()</dt>
   <dd>The file name component of the entry's path</dd>
   <p>

   <dt>char[] <b>fileExt</b>()</dt>
   <dd>The file extension component of the entry's path</dd>
   <p>

   <dt>d_time <b>creationTime</b>()</dt>
   <dd>The time the entry was created</dd>
   <p>

   <dt>d_time <b>modificationTime</b>()</dt>
   <dd>The time the entry was last modified</dd>
   <p>

   <dt>d_time <b>lastAccessTime</b>()</dt>
   <dd>The time the entry was last accessed</dd>
   <p>

   <dt>d_time <b>lastStatusChangeTime</b>()</dt>
   <dd>The time the entry's last status changed</dd>
   <p>

   <dt>recls_filesize_t <b>fileSize</b>()</dt>
   <dd>The size of the entry</dd>
   <p>

   <dt>int <b>isReadOnly</b>()</dt>
   <dd>Indicates whether the entry is read-only</dd>
   <p>

   <dt>int <b>isDirectory</b>()</dt>
   <dd>Indicates whether the entry is a directory</dd>
   <p>

   <dt>int <b>isLink</b>()</dt>
   <dd>Indicates whether the entry is a link</dd>
   <p>
  </dl>
 </dl>
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.FileSearch"><h3>std.recls.FileSearch</h3></a>
 The <b>FileSearch</b> class derives from the 
 <a href = "#std.recls.Search">Search</a> class, and has the following
 methods:
 <dl>
  <dl>
   <dt><b>this</b>(in char[] searchRoot, in char[] pattern, in uint flags)</dt>
    <dd>Create a search object with the given searchRoot, pattern and flags
    <p>    
    <dd><i>searchRoot</i> The root directory of the search. If null, or the empty string, the current directory is assumed</dd>
    <dd><i>pattern</i> The search pattern. If null all entries are returned (equivalent to specifying 
    <a href = "#std.recls.wildcardsAll">wildcardsAll()</a>.) If the empty string, the search returns an empty result set.
    <dd><i>flags</i> A combination of <a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a> flags which moderate the search</dd>
    <p>
    <dd><b>Note</b>: <i>pattern</i> can be a composite pattern, e.g. <b>"*.exe;*.zip;*.c??"</b>, but the separator <b>must</b>
    be the correct one for the <b>local</b> operating system (see <a href = "#std.recls.getPathSeparator">getPathSeparator()</a>).</dd>
    <p>    
  </dl>
 </dl>
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.FtpSearch"><h3>std.recls.FtpSearch</h3></a>
 The <b>FtpSearch</b> class derives from the 
 <a href = "#std.recls.Search">Search</a> class, and has the following
 methods:
 <dl>
  <dl>
   <dt><b>this</b>(in char[] host, in char[] username, in char[] password, in char[] searchRoot, in char[] pattern, in uint flags)</dt>
    <dd>Create a search object with the given searchRoot, pattern and flags
    <p>    
    <dd><i>host</i> The name of the host providing the FTP service</dd>
    <dd><i>username</i> The username of the acount to use to log on to the FTP server</dd>
    <dd><i>password</i> The password of the acount to use to log on to the FTP server</dd>
    <dd><i>searchRoot</i> The root directory of the search. If null, or the empty string, the current directory is assumed</dd>
    <dd><i>pattern</i> The search pattern. If null all entries are returned (equivalent to specifying 
    <a href = "#std.recls.wildcardsAll">wildcardsAll()</a>.) If the empty string, the search returns an empty result set.
    <dd><i>flags</i> A combination of <a href = "#std.recls.RECLS_FLAG">RECLS_FLAG</a> flags which moderate the search</dd>
    <p>
    <dd><b>Note</b>: <i>pattern</i> can be a composite pattern, e.g. <b>"*.exe;*.zip;*.c??"</b>, but the separator <b>must</b>
    be the correct one for the <b>local</b> operating system (see <a href = "#std.recls.getPathSeparator">getPathSeparator()</a>).</dd>
    <p>    
  </dl>
 </dl>
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.ReclsException"><h3>std.recls.ReclsException</h3></a>
 Exception class used by the recls module.
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.Search"><h3>std.recls.Search</h3></a>
 Base class of the <a href = "#std.recls.FileSearch">FileSearch</a> and
 <a href = "#std.recls.FtpSearch">FtpSearch</a> classes. Supports <b>foreach</b>.
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls.RECLS_FLAG"><h3>std.recls.RECLS_FLAG</h3></a>
 Enumeration, whose values control the search behaviour provided by the 
 <a href = "#std.recls.FileSearch">FileSearch</a> and
 <a href = "#std.recls.FtpSearch">FtpSearch</a> classes.
 <dl>
  <dl>
   <dt><b>FILES</b> - Include files in search. Included by default if none specified</dt>
   <dt><b>DIRECTORIES</b> - Include directories in search. Not currently supported</dt>
   <dt><b>LINKS</b> - Include links in search. Ignored in Win32</dt>
   <dt><b>DEVICES</b> - Include devices in search. Not currently supported</dt>
   <dt><b>RECURSIVE</b> - Searches given directory and all sub-directories</dt>
   <dt><b>NO_FOLLOW_LINKS</b> - Does not expand links</dt>
   <dt><b>DIRECTORY_PARTS</b> - Fills out the directory parts. Supported from version 1.1.1 onwards</dt>
   <dt><b>DETAILS_LATER</b> - Does not fill out anything other than the path. Not currently supported</dt>
   <dt><b>PASSIVE_FTP</b> - Passive mode in FTP</dt>
  </dl>
 </dl>
 <p>

 <!-- ------------------------------------- -->
 <a name = "std.recls functions"><h3>std.recls functions</h3></a>
 Free functions provided by the recls module.
 <p>
 <dl>
  <dl>
   <a name = "std.recls.getRoots"></a>
	  <dt>char[][] <b>getRoots</b>();</dt>
	  <dd>Returns an array of all file-system roots on the local system.</dd>
	  <dd>
    On Unix, this always returns an array with a single entry which is <b>"/"</b>. On Windows, 
    it will return an array of strings representing the drives, e.g. <b>"C:"</b>, <b>"D:"</b>, <b>"H:"</b>, <b>"Y:"</b>
   </dd>.
	  <p>

   <a name = "std.recls.getPathNameSeparator"></a>
	  <dt>char[] <b>getPathNameSeparator</b>();</dt>
	  <dd>Returns the symbol used to separate distinct path names in path name lists.</dd>
	  <dd>
    On UNIX this is <b>"/"</b>; on Win32 it is <b>"\"</b>.
   </dd>.
	  <p>

   <a name = "std.recls.getPathSeparator"></a>
   <dt>char[] <b>getPathNameSeparator</b>();</dt>
	  <dd>Returns the symbol used to separate the directory parts within paths.</dd>
	  <dd>
    On UNIX this is <b>":"</b>; on Win32 it is <b>";"</b>.
   </dd>.
	  <p>

   <a name = "std.recls.wildcardsAll"></a>
	  <dt>char[] <b>wildcardsAll</b>();</dt>
	  <dd>Returns the wildcard symbol used to represent the "all files" for the current operating system.</dd>
	  <dd>
    On UNIX this is <b>"*"</b>; on Win32 it is <b>"*.*"</b>.
   </dd>.
	  <p>

   <a name = "std.recls.isDirectoryEmpty"></a>
	  <dt>int <b>isDirectoryEmpty</b>(char[] dir);</dt>
	  <dt>int <b>isDirectoryEmpty</b>(<a href = "#std.recls.Entry">Entry</a> dir);</dt>
	  <dd>
    Determines whether the given directory is empty.
   </dd>.
	  <p>

   <a name = "std.recls.calcDirectorySize"></a>
	  <dt>recls_filesize_t <b>calcDirectorySize</b>(char[] dir, int bRecurse);</dt>
	  <dt>recls_filesize_t <b>calcDirectorySize</b>(<a href = "#std.recls.Entry">Entry</a> dir, int bRecurse);</dt>
	  <dd>
    Determines the size of the given directory. If <i>bRecurse</i> is non-0, it calculates the size of all
    sub-directories, otherwise it counts only the sizes of the files in the given directory.
   </dd>.
	  <p>

  </dl>
 </dl>


<hr><small>Copyright (c) 2003-2004 by Matthew Wilson, Synesis Software Pty Ltd, All Rights Reserved</small>

</td></table>
<h2>Feedback and Comments</h2>

	Add <a
	href="http://www.prowiki.org/wiki4d/wiki.cgi?DocComments/Phobos/StdRecls"
	target="_top" title="Wiki 4 D">feedback and comments</a> regarding this
	page.

<hr><!-- -------------------------------------------- -->
<small>Copyright &copy; 1999-2005 by Digital Mars, All Rights Reserved</small><p>
<!-- Google ad -->

<script type="text/javascript"><!--
google_ad_client = "pub-5628673096434613";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_channel ="";
google_page_url = document.location;
//--></script>
<script type="text/javascript"
  src="../../../../../../../../../pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</font>
</body>

<!-- Mirrored from www.shorthike.com/trac/browser/trunk/tools_win32/dmd/html/d/phobos/std_recls.html?format=raw by HTTrack Website Copier/3.x [XR&CO'2010], Sat, 01 May 2010 04:40:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
 


